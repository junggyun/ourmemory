"use strict";(self["webpackChunkourmemory"]=self["webpackChunkourmemory"]||[]).push([[329],{8329:function(e,t,o){o.r(t),o.d(t,{default:function(){return h}});o(7658);var a=o(3396),n=o(9242),l=o(3824),s=o(4870),i=o(1598),r=o(7627),c=o(2583);const u={class:"main"},m={class:"form"},p={id:"emailInput"},d=["onKeyup"],_={class:"input-error",style:{color:"red"}},Z={id:"passwordInput"},g=["onKeyup"];var v=(0,a.aZ)({name:"LoginView",setup(e){const t=(0,s.iH)(""),o=(0,s.iH)(""),v=(0,s.iH)(!1),f=async function(){try{const e={email:t.value,password:o.value},a=await(0,c.UO)(e),n=a.data.accessToken,s=a.data.refreshToken,u=(0,i.Z)(n).exp,m=(0,i.Z)(n).sub,p=(0,i.Z)(n).name,d=(0,i.Z)(n).nickName,_=(0,i.Z)(n).createdDate,Z=(0,i.Z)(n).auth,g=(0,i.Z)(s).exp;r.Z.commit("setUserId",m),r.Z.commit("setRole",Z),r.Z.commit("setToken",n),r.Z.commit("setTokenExp",u),r.Z.commit("setRefreshToken",s),r.Z.commit("setRefreshTokenExp",g),r.Z.commit("setEmail",e.email),r.Z.commit("setUserName",p),r.Z.commit("setUserNickName",d),r.Z.commit("setUserCreatedDate",_),"ROLE_ADMIN"===Z?await l.Z.replace("/admin"):"ROLE_USER"===Z&&"0"!=m.toString()&&await l.Z.replace(`/${m}/home`)}catch(e){v.value=!0,console.log(e)}},y=function(){l.Z.push("/"),console.log({NODE_ENV:"production",VUE_APP_API_URL:"http://43.202.96.39",VUE_APP_BASE_URL:"http://43.202.96.39",BASE_URL:"/"})},h=function(){l.Z.push("/signup")},b=function(e){e.target.value=e.target.value.replace(/[^A-Za-z0-9@.]/gi,"")};return(e,l)=>((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",m,[(0,a._)("div",{class:"title"},[(0,a._)("h1",{onClick:y},"OurMemory")]),(0,a._)("div",p,[(0,a.wy)((0,a._)("input",{class:"form-control form-control-lg",type:"email",placeholder:"이메일",onKeyup:(0,n.D2)(f,["enter"]),"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),onInput:b,"aria-label":".form-control-lg example"},null,40,d),[[n.nr,t.value]]),(0,a.wy)((0,a._)("span",_,"이메일 또는 비밀번호를 다시 확인해주세요.",512),[[n.F8,v.value]])]),(0,a._)("div",Z,[(0,a.wy)((0,a._)("input",{class:"form-control form-control-lg",type:"password",placeholder:"비밀번호","onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),minlength:8,maxlength:16,onKeyup:(0,n.D2)(f,["enter"]),"aria-label":".form-control-lg example"},null,40,g),[[n.nr,o.value]])]),(0,a._)("div",{id:"loginButton"},[(0,a._)("div",{class:"d-grid gap-2"},[(0,a._)("button",{type:"button",onClick:f,class:"btn btn-secondary btn-lg"},"로그인")])]),(0,a._)("div",{id:"signupButton"},[(0,a._)("div",{class:"d-grid gap-2"},[(0,a._)("button",{type:"button",onClick:h,class:"btn btn-secondary btn-lg"},"계정 만들기")])])])]))}}),f=o(89);const y=(0,f.Z)(v,[["__scopeId","data-v-01176575"]]);var h=y}}]);
//# sourceMappingURL=329.10896492.js.map